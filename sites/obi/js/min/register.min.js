var requestUrl="https://obiclub-new-7.dev.bstd.ru/graphql/landing";function showError(e){$("#passError p").html(e),$("#logoError").addClass("hide"),$("#passError").removeClass("hide")}function hideError(){$("#passError").addClass("hide"),$("#logoError").removeClass("hide")}$(document).ready(function(){$("#doRegister").on("click",function(e){if(e.preventDefault(),$("#formRegister").validate().element("#name"),$("#formRegister").validate().element("#date"),$("#formRegister").validate().element("#phone"),$("#formRegister").validate().element("#mail"),$("#register-success").addClass("hide"),$("#register-unsuccess").removeClass("hide"),0==$("#check").prop("checked"))return $("#check-error").removeClass("hide"),!1;$("#check-error").addClass("hide");var r=$("#name").val(),s=$("#mail").val(),a=$("#phone").val().replace("+","").replace("(","").replace(")","").replace("-","").replace(/\s+/g,""),o=$("#date").val().split("."),t='mutation {spb {registration(firstName: "'+r+'",email: "'+s+'",phone: "'+a+'",birthDate: "'+(o=o[2]+"-"+o[1]+"-"+o[0])+'") {      status      processingStatus      profile {        firstName        phone        email        birthDate      }}}}';$.ajax({url:requestUrl,method:"get",contentType:"application/json",data:{query:t,variables:null},success:function(e){if(null==e.data.spb.registration){var r,s="";for(k in e.errors)for(errField in r=e.errors[k].message,e.errors[k][r])for(errStr in e.errors[k][r][errField])s+=e.errors[k][r][errField][errStr]+"<br>";showError(s)}else hideError(),$("#formRegister")[0].reset(),$("#section3").addClass("hide"),$("#register-success").removeClass("hide")},error:function(e){showError("Ошибка связи")}})})});